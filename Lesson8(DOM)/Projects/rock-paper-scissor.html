<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissor</title>
    </head>
    <body>
        <h3>Rock Paper Scissors</h3>
        <button onclick="
            playGame('rock');
        ">
            Rock
        </button>

        <button onclick="
            playGame('paper');
        ">
            Paper
        </button>

        <button onclick="
            playGame('scissors');
        ">
            Scissors
        </button>

        <button onclick="
            getResult();
        ">
            Show results
        </button>

        <p class="js-status"></p>
        <p class="js-moves"></p>
        <p class="js-score"></p>

        <button onclick="
            resetScore();
        ">
            Reset
        </button>
        
        <script>
            const score = JSON.parse(localStorage.getItem('score')) || {
                win: 0, 
                loss: 0,
                tie: 0
            };

            function pickComputerMove() {
                const random = Math.random();
                let computerMove = '';
                if(random >= 0 && random < 1/3)
                    computerMove = 'rock';
                else if(random >= 1/3 && random < 2/3)
                    computerMove = 'paper';
                else computerMove = 'scissors';
                return computerMove;
            }

            function playGame(playerMove)
            {
                const computerMove = pickComputerMove();
                let result;
                if(playerMove === 'rock')
                {
                    if(computerMove === 'rock')
                        result = 'tie';
                    else if(computerMove === 'paper')
                        result = 'loss';
                    else
                        result = 'win';
                }
                else if(playerMove === 'paper')
                {
                    if(computerMove === 'rock')
                        result = 'win';
                    else if(computerMove === 'paper')
                        result = 'tie';
                    else
                        result = 'loss';
                }
                else
                {
                    if(computerMove === 'rock')
                        result = 'loss';
                    else if(computerMove === 'paper')
                        result = 'win';
                    else result = 'tie';
                }

                if(result === 'win') score.win++;
                else if(result === 'loss') score.loss++;
                else score.tie++;

                const value = JSON.stringify(score);
                localStorage.setItem('score', value);

                displayMove(playerMove, computerMove);
                displayStatus(result);
                updateScore();

                alert(`Your move: ${playerMove} and Computer's move: ${computerMove}... You ${result}`);
            }

            function getResult()
            {
                alert(`Win: ${score.win}, Loss: ${score.loss}, Tie: ${score.tie}`);
            }

            function resetScore()
            {
                score.win = 0;
                score.loss = 0;
                score.tie = 0;
                localStorage.removeItem('score');

                updateScore();

                alert('Results reset successfully!');
            }

            function updateScore()
            {
                const scoreCard = document.querySelector('.js-score');
                scoreCard.innerHTML = `Win: ${score.win}, Loss: ${score.loss}, Tie: ${score.tie}`;
            }

            function displayMove(playerMove, computerMove)
            {
                const move = document.querySelector('.js-moves');
                move.innerHTML = `Your move: ${playerMove} and Computer's move: ${computerMove}`;
            }

            function displayStatus(result)
            {
                const status = document.querySelector('.js-status');
                status.innerHTML = `You ${result}`;
            }
            
        </script>
    </body>
</html>